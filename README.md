# üçµ Tea Factory Simulator

**–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä —á–∞–π–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏ –Ω–∞ Java —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#-–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–û–±—É—á–∞—é—â–∏–µ —Ü–µ–ª–∏](#-–æ–±—É—á–∞—é—â–∏–µ-—Ü–µ–ª–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

**Tea Factory Simulator** ‚Äî –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ Java —á–µ—Ä–µ–∑ —Å–∏–º—É–ª—è—Ü–∏—é —Ä–∞–±–æ—Ç—ã —Ñ–∞–±—Ä–∏–∫–∏. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Phaser` –¥–ª—è —Ñ–∞–∑–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, `ReentrantLock` + `Condition` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ (–±–µ–∑ `synchronized`!), –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Swing.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **4-—Ñ–∞–∑–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–∏–∫–ª** —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Phaser
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã** —Å —è–≤–Ω—ã–º–∏ Lock –∏ Condition
- **6 —Ä–∞–±–æ—á–∏—Ö –ø–æ—Ç–æ–∫–æ–≤** (–ø–æ—Å—Ç–∞–≤—â–∏–∫, –º–∞—Å—Ç–µ—Ä, —Ñ–∞—Å–æ–≤—â–∏–∫, 3 –ø–æ–∫—É–ø–∞—Ç–µ–ª—è)
- **–ò–≥—Ä–æ–≤–æ–π UI** —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —Å –ª–æ–≥–æ–º —Å–æ–±—ã—Ç–∏–π

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Phaser` (–±–µ–∑ –±–∞—Ä—å–µ—Ä–æ–≤ –∏ —Å–µ–º–∞—Ñ–æ—Ä–æ–≤)
- ‚úÖ –Ø–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ReentrantLock` –≤–º–µ—Å—Ç–æ `synchronized`
- ‚úÖ `Condition` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–æ–≤
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω Producer-Consumer —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –±—É—Ñ–µ—Ä–∞–º–∏
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- üé® –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ —Ñ–æ–Ω–∞–º–∏
- üí´ –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã —Å –¥–≤–∏–∂—É—â–∏–º–∏—Å—è –ø–æ–ª–æ—Å–∞–º–∏
- üåà –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—É—Ñ–µ—Ä–æ–≤
- üìù –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- üñ±Ô∏è –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ü–æ—Å—Ç–∞–≤—â–∏–∫ (–§–∞–∑–∞ 0) ‚Üí –ë—É—Ñ–µ—Ä —Å—ã—Ä—å—è ‚Üí –ú–∞—Å—Ç–µ—Ä (–§–∞–∑–∞ 1) ‚Üí –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –±—É—Ñ–µ—Ä ‚Üí 
–§–∞—Å–æ–≤—â–∏–∫ (–§–∞–∑–∞ 2) ‚Üí –ë—É—Ñ–µ—Ä –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ ‚Üí –ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–§–∞–∑–∞ 3) ‚Üí –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 17 –∏–ª–∏ –≤—ã—à–µ
- JDK —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Swing

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Markslv11/TeaFactorySimulator.git
cd TeaFactorySimulator

# –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å
javac -d bin -sourcepath src src/com/teafactory/Main.java

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
java -cp bin com.teafactory.Main
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ IntelliJ IDEA

1. –û—Ç–∫—Ä—ã—Ç—å IntelliJ IDEA
2. `File` ‚Üí `Open` ‚Üí –í—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
3. –î–æ–∂–¥–∞—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
4. –ü–ö–ú –Ω–∞ `Main.java` ‚Üí `Run 'Main.main()'`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TeaFactorySimulator/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ com/
‚îÇ       ‚îî‚îÄ‚îÄ teafactory/
‚îÇ           ‚îú‚îÄ‚îÄ Main.java                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ model/                         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ TeaType.java              # Enum —Ç–∏–ø–æ–≤ —á–∞—è
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ TeaBatch.java             # –ú–æ–¥–µ–ª—å –ø–∞—Ä—Ç–∏–∏ —á–∞—è
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ buffer/                        # –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ TeaBuffer.java            # –ë—É—Ñ–µ—Ä —Å Lock + Condition
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ workers/                       # –†–∞–±–æ—á–∏–µ –ø–æ—Ç–æ–∫–∏
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ AbstractWorker.java       # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ RawSupplier.java          # –ü–æ—Å—Ç–∞–≤—â–∏–∫ —Å—ã—Ä—å—è (–§–∞–∑–∞ 0)
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ TeaMaster.java            # –ú–∞—Å—Ç–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–§–∞–∑–∞ 1)
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ Packer.java               # –§–∞—Å–æ–≤—â–∏–∫ (–§–∞–∑–∞ 2)
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ Buyer.java                # –ü–æ–∫—É–ø–∞—Ç–µ–ª—å (–§–∞–∑–∞ 3, x3)
‚îÇ           ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ core/                          # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ TeaFactory.java           # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Ñ–∞–±—Ä–∏–∫–∏
‚îÇ           ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ gui/                           # –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ               ‚îî‚îÄ‚îÄ FactoryGUI.java           # Swing GUI —Å –∏–≥—Ä–æ–≤—ã–º —Å—Ç–∏–ª–µ–º
‚îÇ
‚îú‚îÄ‚îÄ bin/                                       # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ .class —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ README.md                                  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ .gitignore                                 # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§–∞–∑—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –∏–∑ 4 —Ñ–∞–∑, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `Phaser`:

| –§–∞–∑–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|----------------|----------|
| **0** | SUPPLY | RawSupplier | –ü–æ—Å—Ç–∞–≤–∫–∞ —Å—ã—Ä—å—è –≤ `rawBuffer` |
| **1** | PROCESS | TeaMaster | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—ã—Ä—å—è ‚Üí `midBuffer` |
| **2** | PACK | Packer | –£–ø–∞–∫–æ–≤–∫–∞ ‚Üí `readyBuffer` |
| **3** | CONSUME | Buyer (x3) | –ü–æ–∫—É–ø–∫–∞ –∏–∑ `readyBuffer` |

–ü–æ—Å–ª–µ —Ñ–∞–∑—ã 3 —Ü–∏–∫–ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ñ–∞–∑–µ 0.

### –ü–æ—Ç–æ–∫–∏ (6 —à—Ç—É–∫)

1. **RawSupplier** ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞—Ä—Ç–∏–∏ —á–∞—è –∏ –∫–ª–∞–¥—ë—Ç –≤ `rawBuffer`
2. **TeaMaster** ‚Äî –±–µ—Ä—ë—Ç –∏–∑ `rawBuffer`, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–ª–∞–¥—ë—Ç –≤ `midBuffer`
3. **Packer** ‚Äî –±–µ—Ä—ë—Ç –∏–∑ `midBuffer`, —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç, –∫–ª–∞–¥—ë—Ç –≤ `readyBuffer`
4. **Buyer #1, #2, #3** ‚Äî –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –∑–∞ –≥–æ—Ç–æ–≤—É—é –ø—Ä–æ–¥—É–∫—Ü–∏—é –∏–∑ `readyBuffer`

### –ë—É—Ñ–µ—Ä—ã

–í—Å–µ –±—É—Ñ–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `TeaBuffer`:

- **–í–Ω—É—Ç—Ä–∏**: `ArrayDeque<TeaBatch>`
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: `ReentrantLock` + 2 `Condition` (`notEmpty`, `notFull`)
- **–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: 
  - `rawBuffer` ‚Äî 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  - `midBuffer` ‚Äî 3 —ç–ª–µ–º–µ–Ω—Ç–∞
  - `readyBuffer` ‚Äî 4 —ç–ª–µ–º–µ–Ω—Ç–∞

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Phaser

–ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `Phaser` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ–µ–π —Ñ–∞–∑–µ:

```java
// –í –∫–∞–∂–¥–æ–º Worker
@Override
public void run() {
    phaser.register();  // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    
    while (!Thread.currentThread().isInterrupted()) {
        int phase = phaser.getPhase();
        
        if (phase == myPhase) {
            doWork();  // –†–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω–æ–π —Ñ–∞–∑–µ
        }
        
        phaser.arriveAndAwaitAdvance();  // –ñ–¥—ë–º –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
    }
    
    phaser.arriveAndDeregister();  // –°–Ω—è—Ç–∏–µ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
}
```

### 2. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±—É—Ñ–µ—Ä–æ–º

```java
// TeaBuffer.java
public void put(TeaBatch batch) throws InterruptedException {
    lock.lock();
    try {
        while (deque.size() >= capacity) {
            notFull.await();  // –ë–ª–æ–∫–∏—Ä—É–µ–º—Å—è, –µ—Å–ª–∏ –±—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω
        }
        deque.addLast(batch);
        notEmpty.signal();    // –ë—É–¥–∏–º –∂–¥—É—â–∏—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
    } finally {
        lock.unlock();
    }
}

public TeaBatch take() throws InterruptedException {
    lock.lock();
    try {
        while (deque.isEmpty()) {
            notEmpty.await();  // –ë–ª–æ–∫–∏—Ä—É–µ–º—Å—è, –µ—Å–ª–∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç
        }
        TeaBatch batch = deque.removeFirst();
        notFull.signal();      // –ë—É–¥–∏–º –∂–¥—É—â–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
        return batch;
    } finally {
        lock.unlock();
    }
}
```

### 3. –ü–æ—á–µ–º—É `while`, –∞ –Ω–µ `if`?

–ó–∞—â–∏—Ç–∞ –æ—Ç **spurious wakeups** (–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–π). –ü–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è –±–µ–∑ –≤—ã–∑–æ–≤–∞ `signal()`, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—Å–ª–æ–≤–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –±—É—Ñ–µ—Ä–æ–≤

–í —Ñ–∞–π–ª–µ `TeaFactory.java`:

```java
this.rawBuffer = new TeaBuffer(5, "RawBuffer");    // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 10
this.midBuffer = new TeaBuffer(3, "MidBuffer");    // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 5
this.readyBuffer = new TeaBuffer(4, "ReadyBuffer"); // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 8
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ—Ç–æ–∫–æ–≤

–í –∫–∞–∂–¥–æ–º –∫–ª–∞—Å—Å–µ Worker:

```java
private long randomDelay() {
    return 300 + (long)(Math.random() * 600);  // 300-900 –º—Å
    // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞: return 100 + (long)(Math.random() * 200); –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —á–∞—è

–í —Ñ–∞–π–ª–µ `TeaType.java`:

```java
public enum TeaType {
    PUER("Puer"),
    OOLONG("Oolong"),
    GREEN("Green"),
    MATCHA("Matcha"),
    BLACK("Black"),
    WHITE("White"),
    ROOIBOS("Rooibos");  // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø
    // ...
}
```

---

## üéì –û–±—É—á–∞—é—â–∏–µ —Ü–µ–ª–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

### –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

- ‚úÖ –§–∞–∑–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Phaser`
- ‚úÖ –Ø–≤–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å `ReentrantLock`
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `Condition`
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω Producer-Consumer
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä—ã (bounded buffers)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- üè≠ **Producer-Consumer** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- üéØ **Observer** ‚Äî GUI –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–∞–±—Ä–∏–∫–∏
- üîÑ **Pipeline** ‚Äî –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- üé® **MVC** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- üßπ –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- üì¶ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –ø–∞–∫–µ—Ç—ã
- üí¨ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üîí –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ

- **–Ø–∑—ã–∫**: Java 17+
- **GUI**: Swing (javax.swing)
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: java.util.concurrent (Phaser, ReentrantLock, Condition)
- **–°–±–æ—Ä–∫–∞**: javac (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä JDK)

### –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

#### `Phaser`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç 6 –ø–æ—Ç–æ–∫–æ–≤ —á–µ—Ä–µ–∑ —Ñ–∞–∑—ã
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—Å–µ –≤—ã–∑–≤–∞–ª–∏ `arriveAndAwaitAdvance()`
- –ö–∞—Å—Ç–æ–º–Ω—ã–π `onAdvance()` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

#### `ReentrantLock`
- –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±—É—Ñ–µ—Ä—É
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ö–≤–∞—á–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –≤ `finally`

#### `Condition`
- `notEmpty` ‚Äî –∂–¥—É—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏, —Å–∏–≥–Ω–∞–ª—è—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏
- `notFull` ‚Äî –∂–¥—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏, —Å–∏–≥–Ω–∞–ª—è—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç lock –ø—Ä–∏ `await()`

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è! –í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (throughput, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—É–∑—É/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∏–º—É–ª—è—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É (`git checkout -b feature/NewFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add NewFeature'`)
4. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/NewFeature`)
5. –û—Ç–∫—Ä—ã—Ç—å Pull Request

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Java Concurrency in Practice](https://jcip.net/) ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–Ω–∏–≥–∞ –ø–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
- [Oracle: Java Concurrency Tutorial](https://docs.oracle.com/javase/tutorial/essential/concurrency/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Phaser](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Phaser.html)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ReentrantLock](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReentrantLock.html)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Condition](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/Condition.html)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

---

## üë§ –ê–≤—Ç–æ—Ä

**Mark**
- GitHub: [@Markslv11](https://github.com/Markslv11)
- –ü—Ä–æ–µ–∫—Ç: [TeaFactorySimulator](https://github.com/Markslv11/TeaFactorySimulator)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ Java –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
- –î–∏–∑–∞–π–Ω UI –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–≥—Ä–æ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω–≤–µ–π–µ—Ä–∞—Ö

---
